(()=>{var e={};e.id=960,e.ids=[960],e.modules={2848:e=>{function r(e){var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}r.keys=()=>[],r.resolve=r,r.id=2848,e.exports=r},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},1813:(e,r,t)=>{"use strict";t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>m,patchFetch:()=>k,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>w,staticGenerationBailout:()=>_});var s={};t.r(s),t.d(s,{GET:()=>c,POST:()=>l});var o=t(5419),a=t(9108),n=t(9678),u=t(8070);let i=(0,t(2409).eI)(process.env.SUPABASE_URL||"https://placeholder.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.placeholder");async function c(e){try{let{data:e,error:r}=await i.from("workflows").select("*").order("created_at",{ascending:!1});if(r)return console.error("Database error:",r),u.Z.json({error:"Failed to fetch workflows"},{status:500});let t=e?.map(e=>({id:e.id,name:e.name,description:e.description,status:e.status,type:e.type,schedule:e.schedule,platforms:e.platforms,lastRun:e.last_run?new Date(e.last_run):null,nextRun:e.next_run?new Date(e.next_run):null,totalRuns:e.total_runs||0,successRate:e.success_rate||0,createdAt:new Date(e.created_at),config:e.config||{}}))||[];return u.Z.json({workflows:t})}catch(e){return console.error("Get workflows error:",e),u.Z.json({error:"Internal server error"},{status:500})}}async function l(e){try{let r=await e.json(),t=function(e){let r=new Date,[t,s]=e.time.split(":").map(Number),o=new Date(r);return o.setHours(t,s,0,0),o<=r&&o.setDate(o.getDate()+1),o}(r.schedule),{data:s,error:o}=await i.from("workflows").insert([{...r,id:crypto.randomUUID(),status:"paused",total_runs:0,success_rate:0,next_run:t.toISOString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(o)return console.error("Database error:",o),u.Z.json({error:"Failed to create workflow"},{status:500});return u.Z.json({workflow:s})}catch(e){return console.error("Create workflow error:",e),u.Z.json({error:"Internal server error"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/workflows/route",pathname:"/api/workflows",filename:"route",bundlePath:"app/api/workflows/route"},resolvedPagePath:"/Users/seyederick/DevOps/_project_folders/network-sync/web-interface/src/app/api/workflows/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:w,serverHooks:f,headerHooks:h,staticGenerationBailout:_}=p,m="/api/workflows/route";function k(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:w})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,720],()=>t(1813));module.exports=s})();